<!DOCTYPE html>
<html>
<head>
<title>ESCAPE ROAD - ALL GUNS 6S COOLDOWN</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Orbitron',monospace;overflow:hidden;background:#000}
#gameBox{position:relative;width:100vw;height:100vh;background:radial-gradient(circle at center,#0a0a15,#000)}
canvas{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:6px solid;border-image:linear-gradient(45deg,#f44,#fa0,#ff0,#0ff,#44f,#f0f,#f44) 1;box-shadow:0 0 100px rgba(255,68,68,0.8),0 0 200px rgba(0,255,255,0.5),inset 0 0 80px rgba(0,0,0,0.5);animation:borderPulse 2s infinite,borderShift 5s infinite}
@keyframes borderPulse{0%,100%{filter:brightness(1) saturate(1.2)}50%{filter:brightness(1.4) saturate(1.5)}}
@keyframes borderShift{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
#hud{position:absolute;top:30px;left:30px;right:30px;display:flex;justify-content:space-between;pointer-events:none;z-index:10}
.hudBox{background:linear-gradient(135deg,rgba(10,10,30,0.97),rgba(30,30,60,0.95));padding:22px 36px;border-radius:25px;border:4px solid;margin:0 12px;backdrop-filter:blur(20px);box-shadow:0 15px 50px rgba(0,0,0,0.8),inset 0 3px 15px rgba(255,255,255,0.15);transition:all .3s;animation:hudFloat 4s ease-in-out infinite;position:relative;overflow:hidden}
.hudBox::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,transparent,rgba(255,255,255,0.1),transparent);animation:hudShine 3s infinite}
@keyframes hudShine{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
@keyframes hudFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.t{border-color:#0f0;background:linear-gradient(135deg,rgba(0,255,0,0.2),rgba(0,180,0,0.15));box-shadow:0 0 30px rgba(0,255,0,0.3)}
.s{border-color:#0ff;background:linear-gradient(135deg,rgba(0,255,255,0.2),rgba(0,180,180,0.15));box-shadow:0 0 30px rgba(0,255,255,0.3)}
.c{border-color:#fa0;background:linear-gradient(135deg,rgba(255,170,0,0.2),rgba(200,130,0,0.15));box-shadow:0 0 30px rgba(255,170,0,0.3)}
.w{border-color:#f44;background:linear-gradient(135deg,rgba(255,68,68,0.2),rgba(200,50,50,0.15));box-shadow:0 0 30px rgba(255,68,68,0.3)}
.hudLabel{font-size:12px;letter-spacing:4px;opacity:0.9;margin-bottom:8px;text-transform:uppercase;font-weight:900}
.hudValue{font-size:28px;font-weight:900;text-shadow:0 0 20px currentColor,0 0 40px currentColor,0 4px 10px rgba(0,0,0,0.5)}
.t .hudValue{color:#0f0}
.s .hudValue{color:#0ff}
.c .hudValue{color:#fa0}
.w .hudValue{color:#f44}
#stars{position:absolute;top:140px;right:35px;font-size:42px;color:#ff4;text-shadow:0 0 30px #f00,0 0 60px #f00,0 5px 15px rgba(0,0,0,0.5);animation:starPulse 0.8s infinite}
@keyframes starPulse{0%,100%{transform:scale(1) rotate(0deg)}50%{transform:scale(1.3) rotate(8deg)}}
#comboBox{position:absolute;top:140px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,rgba(255,68,68,0.95),rgba(255,170,0,0.95));padding:20px 40px;border-radius:25px;border:4px solid #ff0;backdrop-filter:blur(20px);box-shadow:0 15px 50px rgba(255,170,0,0.8);display:none;animation:comboPopIn 0.3s ease-out}
@keyframes comboPopIn{0%{transform:translateX(-50%) scale(0.5) rotate(-10deg)}100%{transform:translateX(-50%) scale(1) rotate(0deg)}}
#comboText{font-size:36px;font-weight:900;color:#fff;text-shadow:0 0 30px #f44,0 4px 10px rgba(0,0,0,0.8);letter-spacing:3px}
#comboCount{font-size:48px;font-weight:900;color:#ff0;text-shadow:0 0 40px #ff0,0 4px 10px rgba(0,0,0,0.8)}
#streakMsg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:72px;font-weight:900;color:#ff0;text-shadow:0 0 50px #ff0,0 0 100px #ff0,0 8px 20px rgba(0,0,0,0.8);opacity:0;pointer-events:none;z-index:100;animation:streakBounce 0.5s ease-out}
@keyframes streakBounce{0%{transform:translate(-50%,-50%) scale(0.4)}50%{transform:translate(-50%,-50%) scale(1.3)}100%{transform:translate(-50%,-50%) scale(1)}}
#streakMsg.show{opacity:1}
#jukeMsg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:72px;font-weight:900;color:#0ff;text-shadow:0 0 50px #0ff,0 0 100px #0ff,0 8px 20px rgba(0,0,0,0.8);opacity:0;pointer-events:none;transition:opacity .3s;z-index:100;animation:msgBounce 0.5s ease-out}
@keyframes msgBounce{0%{transform:translate(-50%,-50%) scale(0.4) rotate(-10deg)}50%{transform:translate(-50%,-50%) scale(1.3) rotate(3deg)}100%{transform:translate(-50%,-50%) scale(1) rotate(0deg)}}
#jukeMsg.show{opacity:1}
.screen{position:absolute;inset:0;background:radial-gradient(circle,rgba(15,15,40,0.98),rgba(5,5,15,0.99));display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;z-index:999;backdrop-filter:blur(30px);overflow-y:auto}
.title{font-size:clamp(70px,15vw,120px);font-weight:900;margin-bottom:35px;background:linear-gradient(135deg,#f44,#fa0,#ff0,#0ff,#44f,#f0f,#f44);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:300% 300%;letter-spacing:10px;text-transform:uppercase;animation:titleShine 3s infinite,titleFloat 3s ease-in-out infinite;filter:drop-shadow(0 0 40px rgba(255,68,68,0.6))}
@keyframes titleShine{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes titleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
.subtitle{font-size:clamp(20px,5.5vw,32px);margin-bottom:55px;color:#0ff;letter-spacing:8px;text-transform:uppercase;text-shadow:0 0 30px #0ff,0 0 60px #0ff,0 4px 10px rgba(0,0,0,0.5);animation:subtitlePulse 2s infinite}
@keyframes subtitlePulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.8;transform:scale(1.02)}}
.btn{position:relative;padding:clamp(20px,5vw,28px) clamp(45px,9vw,70px);font:bold clamp(20px,5vw,26px) 'Orbitron';background:linear-gradient(135deg,#f44,#d22);color:#fff;border:5px solid #f66;border-radius:40px;cursor:pointer;margin:18px;letter-spacing:5px;text-transform:uppercase;box-shadow:0 15px 50px rgba(255,68,68,0.6),inset 0 4px 20px rgba(255,255,255,0.4);transition:all .3s;overflow:hidden}
.btn::before{content:'';position:absolute;inset:-50%;background:radial-gradient(circle,rgba(255,255,255,0.4),transparent);opacity:0;transition:opacity .3s}
.btn:hover{transform:translateY(-8px) scale(1.08);box-shadow:0 20px 60px rgba(255,68,68,0.8),inset 0 4px 20px rgba(255,255,255,0.5);border-color:#ff8}
.btn:hover::before{opacity:1;animation:btnShine 1.5s infinite}
@keyframes btnShine{0%{transform:translate(-100%,-100%) rotate(0deg)}100%{transform:translate(100%,100%) rotate(360deg)}}
.btn:active{transform:translateY(-2px) scale(1.02)}
.adminBtn{background:linear-gradient(135deg,#f0f,#b0b);border-color:#f0f;font-size:18px;padding:16px 30px;margin:12px;box-shadow:0 15px 50px rgba(255,0,255,0.6)}
.shopGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;max-width:96vw;margin:35px 0;padding:30px;max-height:65vh;overflow-y:auto}
.shopGrid::-webkit-scrollbar{width:14px}
.shopGrid::-webkit-scrollbar-track{background:rgba(0,0,0,0.4);border-radius:12px}
.shopGrid::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#f44,#fa0,#0ff);border-radius:12px;box-shadow:0 0 15px rgba(255,68,68,0.6)}
.carCard{background:linear-gradient(135deg,rgba(35,35,90,0.98),rgba(55,55,115,0.96));padding:32px 36px;border:5px solid #666;border-radius:30px;cursor:pointer;transition:all .4s;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.7),inset 0 3px 20px rgba(255,255,255,0.12);position:relative;overflow:hidden;min-height:260px;display:flex;flex-direction:column;justify-content:space-between}
.carCard::before{content:'';position:absolute;inset:-150%;background:conic-gradient(from 0deg,transparent,rgba(255,255,255,0.25),transparent);opacity:0;transition:all .6s;animation:cardRotate 4s linear infinite paused}
@keyframes cardRotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.carCard:hover:not(.locked)::before{opacity:1;animation-play-state:running}
.carCard:hover:not(.locked){border-color:#0ff;transform:translateY(-10px) scale(1.06);box-shadow:0 25px 80px rgba(0,255,255,0.5),inset 0 4px 25px rgba(255,255,255,0.25)}
.carCard.selected{border-color:#0f0;box-shadow:0 0 60px #0f0,0 0 120px rgba(0,255,0,0.4);animation:selectedGlow 1.5s infinite}
@keyframes selectedGlow{0%,100%{box-shadow:0 0 60px #0f0,0 0 120px rgba(0,255,0,0.4)}50%{box-shadow:0 0 80px #0f0,0 0 160px rgba(0,255,0,0.6)}}
.carCard.locked{opacity:0.35;cursor:not-allowed;filter:grayscale(1) brightness(0.5)}
.carContent{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center}
.emoji{font-size:clamp(65px,14vw,85px);margin-bottom:14px;filter:drop-shadow(0 10px 25px rgba(0,0,0,0.8));animation:emojiFloat 2.5s ease-in-out infinite}
@keyframes emojiFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.carName{font-size:clamp(19px,5vw,26px);font-weight:900;margin-bottom:10px;text-transform:uppercase;letter-spacing:4px;text-shadow:0 3px 12px rgba(0,0,0,0.6);color:#fff}
.carInfo{font-size:clamp(13px,3.2vw,16px);color:#bbb;margin-bottom:10px;letter-spacing:2px;text-shadow:0 2px 6px rgba(0,0,0,0.6);line-height:1.5}
.abilityText{font-size:clamp(12px,3vw,14px);color:#0ff;margin-top:8px;font-weight:900;text-shadow:0 0 12px #0ff,0 2px 6px rgba(0,0,0,0.5)}
.speedFast{color:#0f0;text-shadow:0 0 12px #0f0}
.speedMedium{color:#fa0;text-shadow:0 0 12px #fa0}
.speedSlow{color:#f44;text-shadow:0 0 12px #f44}
.carPrice{font-size:clamp(22px,6vw,32px);font-weight:900;color:#fa0;text-shadow:0 0 25px #fa0,0 0 50px #fa0,0 3px 10px rgba(0,0,0,0.5);margin-top:10px}
.stats{display:flex;gap:40px;margin:40px 0;flex-wrap:wrap;justify-content:center}
.statBox{background:linear-gradient(135deg,rgba(35,35,90,0.98),rgba(55,55,115,0.96));padding:35px 45px;border-radius:30px;border:5px solid;min-width:200px;box-shadow:0 20px 60px rgba(0,0,0,0.7);transition:transform .3s}
.statBox:hover{transform:translateY(-10px) scale(1.08)}
.statLabel{font-size:14px;color:#bbb;letter-spacing:5px;margin-bottom:14px;text-transform:uppercase;font-weight:900}
.statValue{font-size:clamp(36px,9vw,48px);font-weight:900;text-shadow:0 0 30px currentColor,0 0 60px currentColor,0 4px 12px rgba(0,0,0,0.6)}
#controls{position:absolute;bottom:30px;right:30px;background:rgba(10,10,30,0.95);padding:25px 36px;border-radius:25px;border:4px solid #0ff;font-size:16px;color:#0ff;backdrop-filter:blur(20px);box-shadow:0 10px 50px rgba(0,255,255,0.5)}
#controls div{margin:10px 0;letter-spacing:3px;font-weight:900}
#abilityHint{color:#f0f;font-size:18px;margin-top:12px;text-shadow:0 0 18px #f0f}
input{font-family:'Orbitron',monospace;padding:22px 36px;font-size:22px;border:5px solid #0ff;border-radius:25px;background:rgba(0,0,0,0.95);color:#0ff;margin:30px;text-align:center;letter-spacing:4px;box-shadow:0 8px 40px rgba(0,255,255,0.4)}
input::placeholder{color:#088}
.adminPanel{background:linear-gradient(135deg,rgba(70,0,90,0.98),rgba(90,0,110,0.96));padding:40px;border-radius:30px;border:5px solid #f0f;margin:30px;max-width:700px;box-shadow:0 20px 60px rgba(255,0,255,0.5)}
.adminPanel h3{color:#f0f;margin-bottom:22px;text-shadow:0 0 30px #f0f;font-size:26px;letter-spacing:4px}
.adminPanel button{margin:14px}
#progressBar{position:absolute;bottom:30px;left:30px;background:rgba(10,10,30,0.95);padding:20px 30px;border-radius:25px;border:4px solid #f0f;backdrop-filter:blur(20px);box-shadow:0 10px 50px rgba(255,0,255,0.5);display:none;min-width:300px}
#progressLabel{color:#f0f;font-size:16px;font-weight:900;letter-spacing:3px;margin-bottom:10px;text-shadow:0 0 15px #f0f}
#progressBarBg{background:#222;height:20px;border-radius:12px;overflow:hidden;box-shadow:inset 0 4px 10px rgba(0,0,0,0.5)}
#progressBarFill{background:linear-gradient(90deg,#f0f,#f44,#fa0);height:100%;width:0%;transition:width 0.3s;box-shadow:0 0 20px #f0f;border-radius:12px}
</style>
</head>
<body>
<div id="gameBox">
<canvas id="c"></canvas>
<div id="hud" style="display:none">
<div class="hudBox t">
<div class="hudLabel">Time</div>
<div class="hudValue" id="timeVal">0:00</div>
</div>
<div class="hudBox s">
<div class="hudLabel">Speed</div>
<div class="hudValue" id="speedVal">0</div>
</div>
<div class="hudBox c">
<div class="hudLabel">Cash</div>
<div class="hudValue" id="cashVal">$0</div>
</div>
<div class="hudBox w">
<div class="hudLabel">Wanted</div>
<div class="hudValue" id="wantedVal">‚òÖ</div>
</div>
</div>
<div id="stars" style="display:none">‚òÖ</div>
<div id="comboBox">
<div id="comboText">COMBO</div>
<div id="comboCount">x0</div>
</div>
<div id="streakMsg">STREAK! üî•</div>
<div id="jukeMsg">JUKED! üéØ</div>
<div id="progressBar">
<div id="progressLabel">LEVEL UP: 0%</div>
<div id="progressBarBg">
<div id="progressBarFill"></div>
</div>
</div>
<div id="controls" style="display:none">
<div>‚Üë ACCELERATE</div>
<div>‚Üì BRAKE</div>
<div>‚Üê ‚Üí STEER</div>
<div><strong>L</strong> JUKE COPS</div>
<div><strong>SPACE</strong> SHOOT</div>
<div id="abilityHint"></div>
</div>

<div id="menuScreen" class="screen">
<div class="title">ESCAPE ROAD</div>
<div class="subtitle">All Guns - 6s Abilities</div>
<button class="btn" onclick="startGame()">‚ñ∂ Play Game</button>
<button class="btn" onclick="openShop()">üè™ Garage</button>
<button class="adminBtn" onclick="openAdmin()">üîê Admin Panel</button>
</div>

<div id="adminLoginScreen" class="screen" style="display:none">
<div class="title" style="font-size:clamp(50px,12vw,90px)">üîê Admin Login</div>
<input type="password" id="adminPass" placeholder="Enter Password" onkeypress="if(event.key==='Enter')checkAdmin()">
<button class="btn" onclick="checkAdmin()">Login</button>
<button class="btn" onclick="backToMenu()">‚óÄ Back</button>
<div id="adminError" style="color:#f44;margin-top:30px;display:none;font-size:22px;text-shadow:0 0 25px #f44">‚ùå Wrong Password!</div>
</div>

<div id="adminScreen" class="screen" style="display:none">
<div class="title" style="font-size:clamp(50px,12vw,90px)">üëë Admin Panel</div>
<div style="font-size:32px;color:#f0f;margin-bottom:30px;text-shadow:0 0 30px #f0f;font-weight:900">
üí∞ $<span id="adminMoney">0</span>
</div>
<div class="adminPanel">
<h3>üí∞ Money Controls</h3>
<button class="btn" onclick="addMoney(5000)">+$5,000</button>
<button class="btn" onclick="addMoney(25000)">+$25,000</button>
<button class="btn" onclick="addMoney(100000)">+$100,000</button>
<button class="btn" onclick="money=999999;updateAdminMoney()">MAX MONEY</button>
</div>
<div class="adminPanel">
<h3>üöó Car Controls</h3>
<button class="btn" onclick="unlockAllCars()">üîì Unlock All Cars</button>
<button class="btn" onclick="unlockAdminCar()">üëë Unlock ADMIN CAR</button>
</div>
<button class="btn" onclick="backToMenu()">‚óÄ Back to Menu</button>
</div>

<div id="shopScreen" class="screen" style="display:none">
<div class="title" style="font-size:clamp(45px,11vw,85px);margin-bottom:25px">üè™ Garage</div>
<div style="font-size:clamp(32px,7vw,40px);color:#fa0;margin-bottom:30px;font-weight:900;text-shadow:0 0 30px #fa0,0 0 60px #fa0">
üí∞ $<span id="shopMoney">0</span>
</div>
<div class="shopGrid" id="carGrid"></div>
<button class="btn" onclick="backToMenu()">‚óÄ Back to Menu</button>
</div>

<div id="overScreen" class="screen" style="display:none">
<div class="title" style="font-size:clamp(50px,12vw,95px)">üö® Busted!</div>
<div class="subtitle">Police Caught You</div>
<div class="stats">
<div class="statBox" style="border-color:#0f0">
<div class="statLabel">Survival Time</div>
<div class="statValue" style="color:#0f0" id="finalTime">0:00</div>
</div>
<div class="statBox" style="border-color:#fa0">
<div class="statLabel">Cash Earned</div>
<div class="statValue" style="color:#fa0" id="finalCash">$0</div>
</div>
<div class="statBox" style="border-color:#ff0">
<div class="statLabel">Best Combo</div>
<div class="statValue" style="color:#ff0" id="finalCombo">x0</div>
</div>
</div>
<button class="btn" onclick="startGame()">‚ñ∂ Play Again</button>
<button class="btn" onclick="openShop()">üè™ Garage</button>
<button class="btn" onclick="backToMenu()">üè† Main Menu</button>
</div>
</div>

<script>
c=document.getElementById('c');
ctx=c.getContext('2d');
c.width=1200;c.height=750;

let screen='menu';
let money=10000,runCash=0,time=0,wanted=1,frame=0;
let px=700,py=500,pa=-Math.PI/2,ps=0,pmax=10;
let cx=0,cy=0;
let cops=[],coins=[],particles=[],bullets=[];
let currentCar='sedan';
let jukeReady=true,jukeCooldown=0;
let shootReady=true,shootCooldown=0;
let abilityReady=true,abilityCooldown=0;
let combo=0,maxCombo=0,comboTimer=0;
let xp=0,level=1,xpToNext=100;

let cars={
sedan:{n:'Sedan',e:'üöó',m:10,p:0,o:true,c:'#48f',gun:true,ability:'shield',abilityName:'Shield (5s)'},
van:{n:'Van',e:'üöê',m:8,p:2500,o:false,c:'#69f',gun:true,ability:'magnet',abilityName:'Coin Magnet'},
truck:{n:'Monster',e:'üõª',m:9,p:3500,o:false,c:'#a64',gun:true,ability:'ram',abilityName:'Ram Boost'},
suv:{n:'SUV',e:'üöô',m:11,p:4000,o:false,c:'#4a4',gun:true,ability:'shield',abilityName:'Shield (7s)'},
compact:{n:'Compact',e:'üöï',m:13,p:5000,o:false,c:'#fc4',gun:true,ability:'dash',abilityName:'Speed Dash'},
muscle:{n:'Muscle',e:'üöò',m:14,p:6500,o:false,c:'#fa0',gun:true,ability:'burst',abilityName:'Bullet Burst'},
limo:{n:'Limo',e:'üöê',m:10,p:7500,o:false,c:'#000',gun:true,ability:'coins',abilityName:'Rain Coins'},
coupe:{n:'Coupe',e:'üöô',m:15,p:9000,o:false,c:'#f6a',gun:true,ability:'snipe',abilityName:'Sniper Shot'},
sports:{n:'Sports',e:'üèéÔ∏è',m:17,p:12000,o:false,c:'#f44',gun:true,ability:'rapid',abilityName:'Rapid Fire'},
buggy:{n:'Buggy',e:'üèúÔ∏è',m:16,p:15000,o:false,c:'#fa4',gun:true,ability:'jump',abilityName:'Mega Jump'},
rally:{n:'Rally',e:'üèÅ',m:18,p:18000,o:false,c:'#0cf',gun:true,ability:'spread',abilityName:'Spread Shot'},
drift:{n:'Drift',e:'üöó',m:19,p:22000,o:false,c:'#f08',gun:true,ability:'drift',abilityName:'Drift Boost'},
super:{n:'Supercar',e:'üèÅ',m:21,p:28000,o:false,c:'#f4f',gun:true,ability:'laser',abilityName:'Laser Beam'},
racer:{n:'Racer',e:'üèéÔ∏è',m:22,p:35000,o:false,c:'#0f0',gun:true,ability:'missile',abilityName:'Homing Missile'},
hyper:{n:'Hyper',e:'üèÅ',m:24,p:45000,o:false,c:'#ff0',gun:true,ability:'wave',abilityName:'Shock Wave'},
formula:{n:'Formula',e:'üèéÔ∏è',m:26,p:60000,o:false,c:'#f00',gun:true,ability:'orbital',abilityName:'Orbital Strike'},
rocket:{n:'Rocket',e:'üöÄ',m:28,p:80000,o:false,c:'#0ff',gun:true,ability:'barrage',abilityName:'Missile Barrage'},
jet:{n:'Jet Car',e:'‚úàÔ∏è',m:30,p:110000,o:false,c:'#88f',gun:true,ability:'airstrike',abilityName:'Air Strike'},
cyber:{n:'Cyber',e:'ü§ñ',m:25,p:95000,o:false,c:'#0df',gun:true,ability:'emp',abilityName:'EMP Blast'},
tank:{n:'Tank',e:'üõ°Ô∏è',m:7,p:75000,o:false,c:'#484',gun:true,ability:'nuke',abilityName:'Mini Nuke'},
warcar:{n:'WAR CAR',e:'üí•',m:32,p:150000,o:false,c:'#f44',gun:true,ability:'destroy',abilityName:'Mass Destruction'},
admincar:{n:'ADMIN CAR',e:'üëë',m:35,p:0,o:false,c:'#f0f',gun:true,admin:true,ability:'explode',abilityName:'Cop Exploder'}
};

let map=[
[0,0,0,0,0,0,0,0,0,0,0,0,0],
[0,1,1,1,1,1,1,1,1,1,1,1,0],
[0,1,0,0,1,1,0,0,0,1,1,1,0],
[0,1,0,0,1,1,0,0,0,1,1,1,0],
[0,1,1,1,1,1,1,1,1,1,1,1,0],
[0,1,0,0,0,0,0,0,0,0,1,1,0],
[0,1,1,1,1,1,1,1,1,1,1,1,0],
[0,1,0,0,1,1,0,0,0,1,1,1,0],
[0,1,0,0,1,1,0,0,0,1,1,1,0],
[0,1,1,1,1,1,1,1,1,1,1,1,0],
[0,1,0,0,0,0,0,0,0,0,1,1,0],
[0,1,1,1,1,1,1,1,1,1,1,1,0],
[0,0,0,0,0,0,0,0,0,0,0,0,0]
];
TS=105;
let shieldActive=false,shieldTime=0;

function isRoad(x,y){
let tx=Math.floor(x/TS),ty=Math.floor(y/TS);
return map[ty]&&map[ty][tx]==1;
}

function addCombo(){
combo++;
if(combo>maxCombo)maxCombo=combo;
comboTimer=180;
document.getElementById('comboBox').style.display='block';
document.getElementById('comboCount').textContent='x'+combo;
if(combo%5===0){
showStreakMsg();
runCash+=combo*10;
addXP(combo*2);
}
}

function showStreakMsg(){
let msg=document.getElementById('streakMsg');
msg.textContent=['STREAK! üî•','INSANE! ‚ö°','UNSTOPPABLE! üí•','LEGENDARY! üëë'][Math.min(Math.floor(combo/5)-1,3)];
msg.classList.add('show');
setTimeout(()=>msg.classList.remove('show'),1000);
}

function addXP(amount){
xp+=amount;
while(xp>=xpToNext){
xp-=xpToNext;
level++;
xpToNext=Math.floor(xpToNext*1.5);
money+=level*1000;
showStreakMsg();
}
updateProgressBar();
}

function updateProgressBar(){
let pct=(xp/xpToNext)*100;
document.getElementById('progressBarFill').style.width=pct+'%';
document.getElementById('progressLabel').textContent=`LEVEL ${level} - ${Math.floor(pct)}%`;
}

function openAdmin(){
screen='adminLogin';
document.getElementById('menuScreen').style.display='none';
document.getElementById('adminLoginScreen').style.display='flex';
document.getElementById('adminPass').value='';
document.getElementById('adminError').style.display='none';
}

function checkAdmin(){
let pass=document.getElementById('adminPass').value;
if(pass==='zayn2015'){
screen='admin';
document.getElementById('adminLoginScreen').style.display='none';
document.getElementById('adminScreen').style.display='flex';
updateAdminMoney();
}else{
document.getElementById('adminError').style.display='block';
setTimeout(()=>document.getElementById('adminError').style.display='none',2000);
}
}

function updateAdminMoney(){
document.getElementById('adminMoney').textContent=money;
}

function addMoney(amount){
money+=amount;
updateAdminMoney();
}

function unlockAllCars(){
Object.keys(cars).forEach(k=>{
if(k!=='admincar')cars[k].o=true;
});
alert('üîì All cars unlocked!');
}

function unlockAdminCar(){
cars.admincar.o=true;
alert('üëë ADMIN CAR UNLOCKED!');
}

function backToMenu(){
screen='menu';
document.getElementById('menuScreen').style.display='flex';
document.getElementById('shopScreen').style.display='none';
document.getElementById('overScreen').style.display='none';
document.getElementById('adminLoginScreen').style.display='none';
document.getElementById('adminScreen').style.display='none';
document.getElementById('hud').style.display='none';
document.getElementById('stars').style.display='none';
document.getElementById('controls').style.display='none';
document.getElementById('comboBox').style.display='none';
document.getElementById('progressBar').style.display='none';
}

function openShop(){
screen='shop';
document.getElementById('menuScreen').style.display='none';
document.getElementById('shopScreen').style.display='flex';
document.getElementById('overScreen').style.display='none';
document.getElementById('adminScreen').style.display='none';
document.getElementById('shopMoney').textContent=money;
renderShop();
}

function getSpeedClass(speed){
if(speed>=20)return 'speedFast';
if(speed>=12)return 'speedMedium';
return 'speedSlow';
}

function renderShop(){
let grid=document.getElementById('carGrid');
grid.innerHTML='';
Object.keys(cars).forEach(k=>{
let car=cars[k];
let card=document.createElement('div');
card.className=`carCard ${car.o?'':'locked'} ${currentCar==k?'selected':''}`;
card.innerHTML=`
<div class="carContent">
<div class="emoji">${car.e}</div>
<div class="carName">${car.n}</div>
<div class="carInfo">Speed: <span class="${getSpeedClass(car.m)}">${car.m}</span> üî´</div>
<div class="abilityText">A: ${car.abilityName}</div>
</div>
<div class="carPrice">${car.o?(currentCar==k?'‚úÖ SELECTED':'TAP TO SELECT'):(car.p===0?'ADMIN ONLY':'$'+car.p.toLocaleString())}</div>
`;
card.onclick=function(){
if(car.o){
currentCar=k;
pmax=car.m;
renderShop();
}else if(money>=car.p&&car.p>0){
money-=car.p;
car.o=true;
currentCar=k;
pmax=car.m;
document.getElementById('shopMoney').textContent=money;
renderShop();
}
};
grid.appendChild(card);
});
}

function useAbility(){
if(!abilityReady)return;
let car=cars[currentCar];
abilityReady=false;
abilityCooldown=360;
switch(car.ability){
case'explode':
let killCount=cops.length;
cops.forEach(cop=>{
for(let i=0;i<60;i++){
particles.push({
x:cop.x,y:cop.y,
vx:(Math.random()-0.5)*20,
vy:(Math.random()-0.5)*20,
life:1.2,decay:0.018,
color:['#f44','#fa0','#ff0','#f0f'][Math.floor(Math.random()*4)],
size:6+Math.random()*10
});
}
});
for(let i=0;i<killCount;i++)addCombo();
runCash+=cops.length*500;
addXP(killCount*5);
cops=[];
break;
case'shield':
shieldActive=true;
shieldTime=car.n==='SUV'?420:300;
break;
case'magnet':
coins.forEach(coin=>{
let angle=Math.atan2(py-coin.y,px-coin.x);
coin.x+=Math.cos(angle)*30;
coin.y+=Math.sin(angle)*30;
});
break;
case'ram':
ps=pmax*2;
cops.forEach(cop=>{
if(Math.hypot(cop.x-px,cop.y-py)<150){
let angle=Math.atan2(cop.y-py,cop.x-px);
cop.x+=Math.cos(angle)*300;
cop.y+=Math.sin(angle)*300;
}
});
break;
case'dash':
let dashDist=400;
px+=Math.cos(pa)*dashDist;
py+=Math.sin(pa)*dashDist;
for(let i=0;i<30;i++){
particles.push({
x:px-Math.cos(pa)*i*15,y:py-Math.sin(pa)*i*15,
vx:0,vy:0,life:0.8,decay:0.04,
color:'#0ff',size:8
});
}
break;
case'burst':
for(let i=0;i<20;i++){
let angle=pa+(Math.random()-0.5)*1;
bullets.push({
x:px,y:py,
vx:Math.cos(angle)*22,
vy:Math.sin(angle)*22,
life:60
});
}
break;
case'coins':
for(let i=0;i<10;i++){
coins.push({
x:px+(Math.random()-0.5)*400,
y:py+(Math.random()-0.5)*400
});
}
break;
case'snipe':
let target=null,minDist=Infinity;
cops.forEach(cop=>{
let d=Math.hypot(cop.x-px,cop.y-py);
if(d<minDist){minDist=d;target=cop;}
});
if(target){
cops=cops.filter(c=>c!==target);
runCash+=300;
addCombo();
addXP(10);
for(let i=0;i<50;i++){
particles.push({
x:target.x,y:target.y,
vx:(Math.random()-0.5)*15,
vy:(Math.random()-0.5)*15,
life:1,decay:0.025,
color:'#ff0',size:8
});
}
}
break;
case'rapid':
for(let j=0;j<8;j++){
setTimeout(()=>{
for(let i=0;i<3;i++){
bullets.push({
x:px,y:py,
vx:Math.cos(pa+(Math.random()-0.5)*0.3)*28,
vy:Math.sin(pa+(Math.random()-0.5)*0.3)*28,
life:70
});
}
},j*50);
}
break;
case'spread':
for(let i=-4;i<=4;i++){
bullets.push({
x:px,y:py,
vx:Math.cos(pa+i*0.2)*25,
vy:Math.sin(pa+i*0.2)*25,
life:60
});
}
break;
case'wave':
for(let i=0;i<360;i+=15){
let angle=i*Math.PI/180;
particles.push({
x:px,y:py,
vx:Math.cos(angle)*20,
vy:Math.sin(angle)*20,
life:1.5,decay:0.02,
color:'#0ff',size:12
});
}
let waveKills=cops.filter(c=>Math.hypot(c.x-px,c.y-py)<250).length;
for(let i=0;i<waveKills;i++)addCombo();
addXP(waveKills*3);
cops=cops.filter(c=>Math.hypot(c.x-px,c.y-py)>250);
break;
case'destroy':
let destroyKills=cops.length;
for(let i=0;i<destroyKills;i++)addCombo();
addXP(destroyKills*5);
cops=[];
for(let i=0;i<150;i++){
particles.push({
x:px+(Math.random()-0.5)*600,
y:py+(Math.random()-0.5)*600,
vx:(Math.random()-0.5)*25,
vy:(Math.random()-0.5)*25,
life:1.5,decay:0.015,
color:['#f44','#fa0','#ff0'][Math.floor(Math.random()*3)],
size:10+Math.random()*15
});
}
runCash+=2000;
break;
default:
cops.forEach((cop,i)=>{
if(Math.hypot(cop.x-px,cop.y-py)<400){
for(let j=0;j<40;j++){
particles.push({
x:cop.x,y:cop.y,
vx:(Math.random()-0.5)*18,
vy:(Math.random()-0.5)*18,
life:1,decay:0.025,
color:['#f44','#fa0','#ff0'][Math.floor(Math.random()*3)],
size:7+Math.random()*9
});
}
cops.splice(i,1);
runCash+=250;
addCombo();
addXP(5);
}
});
}
}

function startGame(){
screen='game';
document.getElementById('menuScreen').style.display='none';
document.getElementById('shopScreen').style.display='none';
document.getElementById('overScreen').style.display='none';
document.getElementById('hud').style.display='flex';
document.getElementById('stars').style.display='block';
document.getElementById('controls').style.display='block';
document.getElementById('progressBar').style.display='block';
document.getElementById('abilityHint').textContent='A: '+cars[currentCar].abilityName;
runCash=0;time=0;wanted=1;cops=[];coins=[];particles=[];bullets=[];px=700;py=500;ps=0;pa=-Math.PI/2;jukeReady=true;jukeCooldown=0;shootReady=true;shootCooldown=0;abilityReady=true;abilityCooldown=0;shieldActive=false;shieldTime=0;combo=0;maxCombo=0;comboTimer=0;
updateProgressBar();
gameLoop();
}

function endGame(){
money+=runCash;
document.getElementById('finalTime').textContent=Math.floor(time/60)+':'+Math.floor(time%60).toString().padStart(2,'0');
document.getElementById('finalCash').textContent='$'+runCash;
document.getElementById('finalCombo').textContent='x'+maxCombo;
screen='over';
document.getElementById('overScreen').style.display='flex';
document.getElementById('hud').style.display='none';
document.getElementById('stars').style.display='none';
document.getElementById('controls').style.display='none';
document.getElementById('comboBox').style.display='none';
document.getElementById('progressBar').style.display='none';
}

function showJukeMsg(){
let msg=document.getElementById('jukeMsg');
msg.classList.add('show');
setTimeout(()=>msg.classList.remove('show'),800);
}

function jukeCops(){
if(!jukeReady)return;
jukeReady=false;
jukeCooldown=180;
showJukeMsg();
cops.forEach(cop=>{
let dist=Math.hypot(cop.x-px,cop.y-py);
if(dist<400){
let angle=Math.atan2(cop.y-py,cop.x-px);
cop.x+=Math.cos(angle)*200;
cop.y+=Math.sin(angle)*200;
for(let i=0;i<20;i++){
particles.push({
x:cop.x,y:cop.y,
vx:(Math.random()-0.5)*15,
vy:(Math.random()-0.5)*15,
life:1,decay:0.03,
color:'#0ff',size:4+Math.random()*6
});
}
}
});
}

function shootGun(){
if(!shootReady)return;
shootReady=false;
shootCooldown=currentCar==='admincar'?5:8;
let numBullets=currentCar==='admincar'?5:3;
for(let i=0;i<numBullets;i++){
let spreadAngle=pa+(Math.random()-0.5)*0.4;
bullets.push({
x:px,y:py,
vx:Math.cos(spreadAngle)*25,
vy:Math.sin(spreadAngle)*25,
life:70
});
}
}

let keys={};
document.addEventListener('keydown',e=>{
keys[e.code]=true;
if(e.code==='KeyL'&&screen==='game')jukeCops();
if(e.code==='KeyA'&&screen==='game')useAbility();
if(e.code==='Space'&&screen==='game'){
e.preventDefault();
shootGun();
}
});
document.addEventListener('keyup',e=>keys[e.code]=false);

function drawCar(x,y,angle,color,isPolice){
ctx.save();
ctx.translate(x-cx,y-cy);
ctx.rotate(angle);
if(shieldActive&&!isPolice){
ctx.strokeStyle='#0ff';
ctx.lineWidth=8;
ctx.shadowColor='#0ff';
ctx.shadowBlur=40;
ctx.beginPath();
ctx.arc(0,0,65,0,Math.PI*2);
ctx.stroke();
ctx.strokeStyle='#0ff';
ctx.lineWidth=4;
ctx.beginPath();
ctx.arc(0,0,75,0,Math.PI*2);
ctx.stroke();
}
ctx.shadowColor=color;
ctx.shadowBlur=35;
ctx.fillStyle=color;
ctx.fillRect(-26,-38,52,76);
let shineGrad=ctx.createLinearGradient(-26,-38,26,-38);
shineGrad.addColorStop(0,color);
shineGrad.addColorStop(0.3,'rgba(255,255,255,0.6)');
shineGrad.addColorStop(0.7,'rgba(255,255,255,0.4)');
shineGrad.addColorStop(1,color);
ctx.fillStyle=shineGrad;
ctx.fillRect(-26,-38,52,76);
let windGrad=ctx.createLinearGradient(-20,-34,20,-34);
windGrad.addColorStop(0,'#4488ff');
windGrad.addColorStop(0.5,'#aaccff');
windGrad.addColorStop(1,'#4488ff');
ctx.fillStyle=windGrad;
ctx.fillRect(-20,-34,40,26);
ctx.fillStyle='#222';
ctx.fillRect(-18,16,36,20);
ctx.fillStyle='#fff';
ctx.shadowColor='#fff';
ctx.shadowBlur=25;
ctx.fillRect(-22,-40,15,9);
ctx.fillRect(7,-40,15,9);
ctx.shadowBlur=18;
ctx.fillStyle='#f22';
ctx.shadowColor='#f22';
ctx.fillRect(-20,36,15,8);
ctx.fillRect(5,36,15,8);
ctx.shadowBlur=0;
ctx.fillStyle='#111';
ctx.strokeStyle='#555';
ctx.lineWidth=3;
ctx.fillRect(-30,-28,15,26);
ctx.strokeRect(-30,-28,15,26);
ctx.fillRect(15,-28,15,26);
ctx.strokeRect(15,-28,15,26);
ctx.fillRect(-30,14,15,26);
ctx.strokeRect(-30,14,15,26);
ctx.fillRect(15,14,15,26);
ctx.strokeRect(15,14,15,26);
if(isPolice){
ctx.fillStyle=frame%20<10?'#f00':'#00f';
ctx.shadowColor=frame%20<10?'#f00':'#00f';
ctx.shadowBlur=30;
ctx.fillRect(-16,-40,32,14);
ctx.shadowBlur=0;
}
ctx.restore();
}

function gameLoop(){
if(screen!=='game')return;
frame++;
time+=1/60;
wanted=Math.min(5,1+Math.floor(time/15));
if(jukeCooldown>0){
jukeCooldown--;
if(jukeCooldown===0)jukeReady=true;
}
if(shootCooldown>0){
shootCooldown--;
if(shootCooldown===0)shootReady=true;
}
if(abilityCooldown>0){
abilityCooldown--;
if(abilityCooldown===0)abilityReady=true;
}
if(shieldTime>0){
shieldTime--;
if(shieldTime===0)shieldActive=false;
}
if(comboTimer>0){
comboTimer--;
if(comboTimer===0){
combo=0;
document.getElementById('comboBox').style.display='none';
}
}
if(keys['ArrowUp'])ps=Math.min(ps+0.5,pmax);
if(keys['ArrowDown'])ps=Math.max(ps-0.6,-6);
else ps*=0.96;
if(keys['ArrowLeft'])pa-=0.075;
if(keys['ArrowRight'])pa+=0.075;
px+=Math.cos(pa)*ps;
py+=Math.sin(pa)*ps;
cx=px-c.width/2;
cy=py-c.height/2;
let bgGrad=ctx.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width);
bgGrad.addColorStop(0,'#12122a');
bgGrad.addColorStop(1,'#000');
ctx.fillStyle=bgGrad;
ctx.fillRect(0,0,c.width,c.height);
for(let y=0;y<map.length;y++){
for(let x=0;x<map[y].length;x++){
let wx=x*TS,wy=y*TS,sx=wx-cx,sy=wy-cy;
if(sx>-TS&&sx<c.width+TS&&sy>-TS&&sy<c.height+TS){
if(map[y][x]){
let roadGrad=ctx.createLinearGradient(sx,sy,sx+TS,sy+TS);
roadGrad.addColorStop(0,'#5555a0');
roadGrad.addColorStop(0.5,'#444488');
roadGrad.addColorStop(1,'#333377');
ctx.fillStyle=roadGrad;
ctx.fillRect(sx,sy,TS,TS);
ctx.strokeStyle='#ffbb44';
ctx.lineWidth=6;
ctx.lineCap='round';
ctx.shadowColor='#ffbb44';
ctx.shadowBlur=15;
ctx.beginPath();
ctx.moveTo(sx+TS/2,sy+15);
ctx.lineTo(sx+TS/2,sy+TS-15);
ctx.stroke();
ctx.shadowBlur=0;
}else{
ctx.fillStyle='#1a1a35';
ctx.fillRect(sx,sy,TS,TS);
ctx.fillStyle='rgba(255,255,255,0.03)';
ctx.fillRect(sx+8,sy+8,TS-16,TS-16);
}
}
}
}
for(let i=coins.length-1;i>=0;i--){
let coin=coins[i];
ctx.save();
ctx.translate(coin.x-cx,coin.y-cy);
ctx.shadowColor='#ffbb00';
ctx.shadowBlur=35;
let coinGrad=ctx.createRadialGradient(0,0,0,0,0,22);
coinGrad.addColorStop(0,'#ffee44');
coinGrad.addColorStop(0.5,'#ffbb00');
coinGrad.addColorStop(1,'#ff9900');
ctx.fillStyle=coinGrad;
ctx.beginPath();
ctx.arc(0,0,22,0,Math.PI*2);
ctx.fill();
ctx.shadowBlur=20;
ctx.strokeStyle='#ffff99';
ctx.lineWidth=5;
ctx.stroke();
ctx.restore();
if(Math.hypot(coin.x-px,coin.y-py)<45){
runCash+=50*(1+combo*0.1);
addXP(2);
for(let j=0;j<25;j++){
particles.push({
x:coin.x,y:coin.y,
vx:(Math.random()-0.5)*16,
vy:(Math.random()-0.5)*16,
life:1.2,decay:0.02,
color:'#ffbb00',size:5+Math.random()*7
});
}
coins.splice(i,1);
}
}
for(let i=particles.length-1;i>=0;i--){
let p=particles[i];
p.x+=p.vx;
p.y+=p.vy;
p.vx*=0.95;
p.vy*=0.95;
p.life-=p.decay;
if(p.life<=0){
particles.splice(i,1);
continue;
}
ctx.save();
ctx.globalAlpha=p.life;
ctx.translate(p.x-cx,p.y-cy);
ctx.shadowColor=p.color;
ctx.shadowBlur=25;
let partGrad=ctx.createRadialGradient(0,0,0,0,0,p.size*p.life);
partGrad.addColorStop(0,p.color);
partGrad.addColorStop(1,'transparent');
ctx.fillStyle=partGrad;
ctx.beginPath();
ctx.arc(0,0,p.size*p.life,0,Math.PI*2);
ctx.fill();
ctx.restore();
}
for(let i=bullets.length-1;i>=0;i--){
let b=bullets[i];
b.x+=b.vx;
b.y+=b.vy;
b.life--;
if(b.life<=0){
bullets.splice(i,1);
continue;
}
ctx.save();
ctx.translate(b.x-cx,b.y-cy);
ctx.shadowColor='#ff0';
ctx.shadowBlur=30;
let bulletGrad=ctx.createRadialGradient(0,0,0,0,0,12);
bulletGrad.addColorStop(0,'#fff');
bulletGrad.addColorStop(0.5,'#ff0');
bulletGrad.addColorStop(1,'#f80');
ctx.fillStyle=bulletGrad;
ctx.beginPath();
ctx.arc(0,0,12,0,Math.PI*2);
ctx.fill();
ctx.restore();
}
if(frame%240==0&&cops.length<wanted*2){
for(let attempt=0;attempt<40;attempt++){
let spawnAngle=(Math.random()*360)*Math.PI/180;
let spawnDist=450+Math.random()*150;
let tx=px+Math.cos(spawnAngle)*spawnDist;
let ty=py+Math.sin(spawnAngle)*spawnDist;
if(isRoad(tx,ty)){
let tooClose=false;
cops.forEach(otherCop=>{
if(Math.hypot(tx-otherCop.x,ty-otherCop.y)<200){
tooClose=true;
}
});
if(!tooClose){
cops.push({
x:tx,y:ty,
health:1,
targetAngle:spawnAngle+Math.PI+(Math.random()-0.5)*1.5,
movePattern:Math.floor(Math.random()*3),
switchTimer:Math.floor(Math.random()*180)+120
});
break;
}
}
}
}
for(let i=cops.length-1;i>=0;i--){
let cop=cops[i];
let dx=px-cop.x,dy=py-cop.y;
let distToPlayer=Math.hypot(dx,dy);
cop.pa=Math.atan2(dy,dx);
cop.switchTimer--;
if(cop.switchTimer<=0){
cop.movePattern=Math.floor(Math.random()*3);
cop.switchTimer=Math.floor(Math.random()*180)+120;
cop.targetAngle=cop.pa+(Math.random()-0.5)*2;
}
cops.forEach(otherCop=>{
if(otherCop!==cop){
let odx=otherCop.x-cop.x;
let ody=otherCop.y-cop.y;
let odist=Math.hypot(odx,ody);
if(odist<100&&odist>0){
let pushAngle=Math.atan2(-ody,-odx);
cop.x+=Math.cos(pushAngle)*3;
cop.y+=Math.sin(pushAngle)*3;
}
}
});
let baseSpeed=4.8+wanted*0.25;
let moveAngle=cop.pa;
if(cop.movePattern===0){
if(distToPlayer>150){
let sideAngle=cop.pa+Math.PI/2;
moveAngle=cop.pa*0.7+sideAngle*0.3;
}
}else if(cop.movePattern===1){
if(distToPlayer>150){
let sideAngle=cop.pa-Math.PI/2;
moveAngle=cop.pa*0.7+sideAngle*0.3;
}
}else{
moveAngle=cop.pa;
}
if(distToPlayer<180){
cop.x+=Math.cos(cop.pa)*baseSpeed*1.6;
cop.y+=Math.sin(cop.pa)*baseSpeed*1.6;
}else{
cop.x+=Math.cos(moveAngle)*baseSpeed;
cop.y+=Math.sin(moveAngle)*baseSpeed;
}
bullets.forEach((b,bi)=>{
if(Math.hypot(b.x-cop.x,b.y-cop.y)<45){
cop.health--;
bullets.splice(bi,1);
for(let j=0;j<35;j++){
particles.push({
x:cop.x,y:cop.y,
vx:(Math.random()-0.5)*20,
vy:(Math.random()-0.5)*20,
life:1.2,decay:0.022,
color:Math.random()>0.5?'#f90':'#ff0',size:7+Math.random()*10
});
}
if(cop.health<=0){
cops.splice(i,1);
runCash+=100*(1+combo*0.2);
addCombo();
addXP(3);
}
}
});
if(cop.health>0){
drawCar(cop.x,cop.y,cop.pa,'#fff',true);
if(!shieldActive&&Math.hypot(cop.x-px,cop.y-py)<52){
endGame();
return;
}
}
}
drawCar(px,py,pa,cars[currentCar].c,false);
if(frame%100==0&&coins.length<12){
for(let i=0;i<25;i++){
let tx=1+Math.floor(Math.random()*11)*TS+50;
let ty=1+Math.floor(Math.random()*10)*TS+50;
if(isRoad(tx,ty)){
coins.push({x:tx,y:ty});
break;
}
}
}
document.getElementById('timeVal').textContent=Math.floor(time/60)+':'+Math.floor(time%60).toString().padStart(2,'0');
document.getElementById('speedVal').textContent=Math.round(Math.abs(ps)*11)+' MPH';
document.getElementById('cashVal').textContent='$'+Math.floor(runCash);
document.getElementById('wantedVal').textContent='‚òÖ'.repeat(wanted);
document.getElementById('stars').textContent='‚òÖ'.repeat(wanted);
requestAnimationFrame(gameLoop);
}
</script>
</body>
</html>
